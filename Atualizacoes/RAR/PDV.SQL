/******************************************************************************/
/****         Generated by IBExpert 2008.08.08 29/12/2015 11:30:35         ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

CREATE DATABASE 'C:\SQL_PDV\BANCOPDV.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 1024
DEFAULT CHARACTER SET NONE;



/******************************************************************************/
/****                               Domains                                ****/
/******************************************************************************/

CREATE DOMAIN BOLIANO AS
VARCHAR(5)
DEFAULT 'False'
NOT NULL;

CREATE DOMAIN BOLIANO_TRUE AS
VARCHAR(5)
DEFAULT 'True'
NOT NULL;

CREATE DOMAIN COD AS
INTEGER;

CREATE DOMAIN DOUBLE_PRE AS
DOUBLE PRECISION
DEFAULT '0';

CREATE DOMAIN DOUBLE_PRE_NN AS
DOUBLE PRECISION
DEFAULT '0'
NOT NULL;

CREATE DOMAIN NOME_100 AS
VARCHAR(100);

CREATE DOMAIN NOME_30 AS
VARCHAR(30);

CREATE DOMAIN QUANT AS
NUMERIC(4,2)
DEFAULT '0';

CREATE DOMAIN VALOR AS
NUMERIC(15,4)
DEFAULT '0';



/******************************************************************************/
/****                              Generators                              ****/
/******************************************************************************/

CREATE GENERATOR GENERATOR_DISP_TODOS;
SET GENERATOR GENERATOR_DISP_TODOS TO 1040;

CREATE GENERATOR GEN_REDUCAO_Z_ID;
SET GENERATOR GEN_REDUCAO_Z_ID TO 0;



/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/



CREATE TABLE BALANCA (
    COD   INTEGER NOT NULL,
    TIPO  NOME_30
);

CREATE TABLE CAIXA (
    COD             INTEGER NOT NULL,
    SALDO           VALOR,
    SUPRIMENTO      VALOR,
    SANGRIA         VALOR,
    DATA            DATE,
    HORA            TIME,
    TIPO_PAGAMENTO  NOME_30,
    VENDEDOR        NOME_30,
    RESPONSAVEL     NOME_30,
    Z               VARCHAR(2),
    OBS             NOME_100,
    CLIENTE         BOLIANO,
    ID_CLIENTE      INTEGER,
    NOME_CLIENTE    NOME_100,
    S               BOLIANO
);

CREATE TABLE CAMPO (
    VALOR  VALOR
);

CREATE TABLE CAMPO_VALOR (
    COD     INTEGER,
    VALOR   VALOR,
    VALOR2  VALOR
);

CREATE TABLE CARTAO (
    COD        INTEGER NOT NULL,
    DESCRICAO  NOME_30,
    ACRE_DESC  VALOR
);

CREATE TABLE CHEQUE (
    COD            INTEGER,
    CHEQ_COD       INTEGER,
    CHEQ_RUIN      BOLIANO,
    CHEQ_PAGO      BOLIANO,
    CHEQ_PRE       BOLIANO,
    CHEQ_VALOR     VALOR,
    CHEQ_DATA      DATE,
    CHEQ_ENVIADO   VARCHAR(70),
    CHEQ_BANCO     VARCHAR(50),
    CHEQ_AGENCIA   VARCHAR(15),
    CHEQ_NCHEQUE   VARCHAR(20),
    CHEQ_NOME3     NOME_100,
    CHEQ_DADOS3    NOME_100,
    CHEQ_D         NOME_100,
    DATA_CADASTRO  DATE,
    CETOR          BOLIANO,
    ANDA           BOLIANO,
    VERI           BOLIANO,
    HORA           TIME,
    USUARIO        VARCHAR(30)
);

CREATE TABLE CHEQUE_VINCULO (
    COD          INTEGER,
    COD_CLIENTE  INTEGER,
    CLIENTES     NOME_100,
    VALOR        VALOR,
    VECIMENTO    DATE,
    RECEBIDO     DATE,
    FISCAL       NOME_100,
    CADASTRO     DATE,
    OBS          NOME_100,
    COD_BARRA    NOME_100,
    CPF          NOME_30,
    VALOR_P      VALOR,
    PAGO         BOLIANO,
    TIPO         NOME_30,
    ATUALIZADO   BOLIANO,
    CONVENIO     NOME_30,
    HORA         TIME,
    OPERADOR     NOME_30,
    RESPONSAVEL  NOME_30,
    BANCO        NOME_30,
    CAIXA        NOME_30,
    CUPOM        NOME_30,
    COMSENHA     BOLIANO
);

CREATE TABLE CONVENIO (
    COD        INTEGER NOT NULL,
    DESCRICAO  NOME_30,
    ACRE_DESC  VALOR,
    DIAS       SMALLINT,
    BANCO      NOME_30
);

CREATE TABLE CUPOM (
    COD               DOUBLE PRECISION NOT NULL,
    COD_CUPOM         INTEGER,
    GNF               INTEGER,
    DATA              DATE,
    HORAINICIAL       TIME,
    HORAFINAL         TIME,
    SUBTOTAL          VALOR,
    DESCONTO          VALOR,
    ACRECIMO          VALOR,
    TOTAL             VALOR,
    TROCO             VALOR,
    VENDEDOR          NOME_30,
    RECEBIDO          VALOR,
    CANCELADO         BOLIANO,
    ATUAL             BOLIANO,
    NOME_CANCELOR     NOME_30,
    HORA_CANCELOR     TIME,
    Z                 VARCHAR(2),
    VALE              BOLIANO,
    TROCOVALE         VALOR,
    TROCOULTRA        VALOR,
    ACRE_DESC         VALOR,
    REGISTRO          INTEGER,
    TIPOACRE_DESC     VARCHAR(1),
    CLIENTE           NOME_100,
    CPF               NOME_30,
    COD_CLIENTE       VARCHAR(10),
    ECF               BOLIANO,
    NPEDIDO           INTEGER,
    COO               VARCHAR(6),
    P                 VARCHAR(1),
    CARTAO            VARCHAR(20),
    IMPRIMIR          VARCHAR(3),
    STATUSNFCE        INTEGER,
    CHAVEACESSO       VARCHAR(44),
    PROTOCOLO         VARCHAR(20),
    NUMERONFCE        INTEGER,
    NUMEROSERIE       INTEGER,
    NFCEERRO          VARCHAR(100),
    NFCE              BOLIANO,
    CHAVEACESSO_ORIG  VARCHAR(44),
    NFC_S             INTEGER,
    NFCEERRO2         VARCHAR(100),
    ECFMOD            VARCHAR(2)
);

CREATE TABLE CUPOM_2 (
    COD               DOUBLE PRECISION,
    COD_CUPOM         INTEGER,
    GNF               INTEGER,
    DATA              DATE,
    HORAINICIAL       TIME,
    HORAFINAL         TIME,
    SUBTOTAL          VALOR,
    DESCONTO          VALOR,
    ACRECIMO          VALOR,
    TOTAL             VALOR,
    TROCO             VALOR,
    VENDEDOR          NOME_30,
    RECEBIDO          VALOR,
    CANCELADO         BOLIANO,
    ATUAL             BOLIANO,
    NOME_CANCELOR     NOME_30,
    HORA_CANCELOR     TIME,
    Z                 VARCHAR(2),
    VALE              BOLIANO,
    TROCOVALE         VALOR,
    TROCOULTRA        VALOR,
    ACRE_DESC         VALOR,
    REGISTRO          INTEGER,
    LIDO              BOLIANO,
    CLIENTE           NOME_100,
    COD_CLIENTE       VARCHAR(10),
    ECF               BOLIANO,
    ECFMOD            VARCHAR(2),
    NPEDIDO           INTEGER,
    CPF               VARCHAR(14),
    COO               VARCHAR(6),
    STATUSNFCE        INTEGER,
    CHAVEACESSO       VARCHAR(44),
    PROTOCOLO         VARCHAR(20),
    NUMERONFCE        INTEGER,
    NUMEROSERIE       INTEGER,
    NFCE              BOLIANO,
    NFCEERRO          VARCHAR(100),
    NFCEERRO2         VARCHAR(100),
    CHAVEACESSO_ORIG  VARCHAR(44),
    NFC_S             INTEGER
);

CREATE TABLE ECF_SELECIONAVEL (
    ID    INTEGER,
    NOME  NOME_30
);

CREATE TABLE FIRMA (
    FANTASIA              VARCHAR(100),
    RASAO                 NOME_100,
    ENDERECO              VARCHAR(50),
    ENDERECO2             VARCHAR(50),
    ESCRICAO              NOME_30,
    CNPJ                  NOME_30,
    TEL                   VARCHAR(20),
    LOJA                  VARCHAR(4),
    CAIXA                 VARCHAR(4),
    CIDADE_ESTADO         VARCHAR(25),
    ENDERECO_SIM          BOLIANO,
    RODAPE1               VARCHAR(50),
    RODAPE2               VARCHAR(50),
    RODAPE3               VARCHAR(50),
    RODAPE4               CHAR(50),
    RODAPE_SIM            BOLIANO,
    MAX_QUANT             VALOR,
    MAX_TROCO_VALE        VALOR,
    MEMO                  BLOB SUB_TYPE 1 SEGMENT SIZE 200,
    MEMO_VALE             BLOB SUB_TYPE 1 SEGMENT SIZE 200,
    MAXDESCONTO           VALOR,
    MAXACRECIMO           VALOR,
    SANGRIAAVISA          BOLIANO,
    SANGRIA               VALOR,
    VALORMAX              VALOR,
    VERSAO                NOME_30,
    BAIRRO                VARCHAR(60),
    CIDADE                VARCHAR(60),
    UF                    VARCHAR(2),
    NCLIENTE              NOME_30,
    TOKEN                 VARCHAR(6),
    ID_TOKEN              VARCHAR(50),
    VALIDADE_CERTIFICADO  DATE,
    VERSAODATA            DATE,
    CRT                   SMALLINT,
    CSOSN                 SMALLINT
);

CREATE TABLE GEN (
    COD    INTEGER NOT NULL,
    VALOR  INTEGER,
    OBS    NOME_30
);

CREATE TABLE GEN_PRY (
    COD    SMALLINT,
    VALOR  DOUBLE PRECISION,
    OBS    NOME_30
);

CREATE TABLE IMPRE_ATIVA (
    COD    INTEGER NOT NULL,
    NOME   VARCHAR(100),
    PORTA  VARCHAR(100)
);

CREATE TABLE IMPRESSORA (
    COD   INTEGER NOT NULL,
    NOME  NOME_30
);

CREATE TABLE INFOR_NFCE (
    NUMEROTOKEM     VARCHAR(50),
    NUMERONFCE      INTEGER,
    NUMEROSERIE     INTEGER,
    STATUS          INTEGER,
    CHAVEACESSO     VARCHAR(44),
    NUMERONFCEHOMO  INTEGER
);

CREATE TABLE ITEM (
    COD_PRY          DOUBLE PRECISION NOT NULL,
    COD              DOUBLE PRECISION NOT NULL,
    NUMERO           SMALLINT,
    COD_PRODUTO      VARCHAR(13),
    PRODUTO          VARCHAR(50),
    PRECO            VALOR,
    QUANT            VALOR,
    DATA             DATE,
    HORA             TIME,
    FISCAL           INTEGER,
    TOTAL            VALOR,
    CANCELADO        BOLIANO,
    GENERICO         BOLIANO,
    ATUAL            BOLIANO,
    NOME_CANCELOR    NOME_30,
    HORA_CANCELOR    TIME,
    COD_CANCELOR     INTEGER,
    Z                VARCHAR(2),
    PROMOCAO         BOLIANO,
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    CUSTO            VALOR,
    LINKADO          BOLIANO,
    CUSTOINICIAL     VALOR,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    DESCONTOS        VALOR,
    CANCELADOITEM    BOLIANO,
    ATUAL2           BOLIANO,
    TOTALF           VALOR,
    ID_FORNECEDOR    INTEGER,
    IMPRIMIR         VARCHAR(3),
    JASALVOPD        VARCHAR(1),
    UNIDVAR          VARCHAR(10),
    UNID             VARCHAR(10),
    DESCONTO         VALOR,
    ACRESCIMO        VALOR,
    CFOP             VARCHAR(4),
    CST_ICMS         VARCHAR(3),
    CST_PIS          VARCHAR(2),
    ICMS_ALIQ        VALOR
);

CREATE TABLE ITEM_2 (
    COD_PRY          DOUBLE_PRE_NN NOT NULL,
    COD              DOUBLE_PRE,
    NUMERO           SMALLINT,
    COD_PRODUTO      VARCHAR(13),
    PRODUTO          VARCHAR(50),
    PRECO            VALOR,
    QUANT            VALOR,
    DATA             DATE,
    HORA             TIME,
    FISCAL           INTEGER,
    TOTAL            VALOR,
    CANCELADO        BOLIANO,
    GENERICO         BOLIANO,
    ATUAL            BOLIANO,
    NOME_CANCELOR    NOME_30,
    HORA_CANCELOR    TIME,
    COD_CANCELOR     INTEGER,
    Z                VARCHAR(2),
    PROMOCAO         BOLIANO,
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    TROCA            BOLIANO,
    CUSTO            VALOR,
    LIDO             BOLIANO,
    LINKADO          BOLIANO,
    CLIENTE          NOME_100,
    COD_CLIENTE      VARCHAR(10),
    VENDEDOR         NOME_30,
    CUSTOINICIAL     VALOR,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    ECF              BOLIANO,
    ECFMOD           VARCHAR(2),
    ATUAL2           BOLIANO,
    TOTALF           VALOR,
    ID_FORNECEDOR    INTEGER,
    UNIDVAR          VARCHAR(10),
    UNID             VARCHAR(10),
    DESCONTO         VALOR,
    ACRESCIMO        VALOR,
    NFCE             BOLIANO,
    CFOP             VARCHAR(4),
    CST_ICMS         VARCHAR(3),
    CST_PIS          VARCHAR(2),
    ICMS_ALIQ        VALOR
);

CREATE TABLE ITEM_TROCA (
    COD_PRY          DOUBLE PRECISION,
    COD              DOUBLE PRECISION,
    NUMERO           SMALLINT,
    COD_PRODUTO      VARCHAR(13),
    PRODUTO          VARCHAR(50),
    PRECO            VALOR,
    QUANT            VALOR,
    DATA             DATE,
    HORA             TIME,
    FISCAL           INTEGER,
    TOTAL            VALOR,
    CANCELADO        BOLIANO,
    GENERICO         BOLIANO,
    ATUAL            BOLIANO,
    NOME_CANCELOR    NOME_30,
    HORA_CANCELOR    TIME,
    COD_CANCELOR     INTEGER,
    Z                VARCHAR(2),
    PROMOCAO         BOLIANO,
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    TROCA            BOLIANO,
    CUSTO            VALOR,
    LINKADO          BOLIANO,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    ATUAL2           BOLIANO
);

CREATE TABLE LEMBRETES (
    COD    INTEGER,
    NOME   NOME_30,
    VALOR  VALOR,
    PAGO   BOLIANO,
    OBS    NOME_100,
    DATA   DATE,
    HORA   TIME
);

CREATE TABLE ONLINE (
    ONLINE  BOLIANO,
    TIPO    SMALLINT,
    CONFIG  BOLIANO,
    ABERTO  BOLIANO
);

CREATE TABLE P_FISCAL (
    COD         INTEGER NOT NULL,
    NOME        VARCHAR(20),
    VALOR       VARCHAR(10),
    BEMATCH     VARCHAR(10),
    DARUMA      VARCHAR(10),
    ELGIN       VARCHAR(10),
    SWEDA       VARCHAR(10),
    SCHALTER    VARCHAR(10),
    OUTRAMARCA  VARCHAR(10)
);

CREATE TABLE PACELAS (
    COD                 INTEGER,
    DESCRICAO           NOME_100,
    SEM_ENTRADA         BOLIANO,
    COM_ENTRADA         BOLIANO,
    COM_ENTRADA_VALOR   VALOR,
    COM_ENT_FIXO        BOLIANO,
    COM_ENT_FIXO_VALOR  VALOR,
    COM_ENT_ATO         BOLIANO,
    COM_ENT_ATO_MININO  VALOR,
    PACELA_ATO          BOLIANO,
    PACELA_ATO_D1       SMALLINT,
    PACELA_ATO_D2       SMALLINT,
    N_PACELAS           SMALLINT,
    INTEVALO            BOLIANO,
    INTERVALO_PAC       SMALLINT,
    SEM_JUROS           BOLIANO,
    COM_JUROS           BOLIANO,
    COM_JUROS_VALOR     VALOR,
    BANCO               NOME_30
);

CREATE TABLE PAGAMENTO (
    COD_PRY         DOUBLE PRECISION NOT NULL,
    COD             DOUBLE PRECISION NOT NULL,
    TIPO_PAGAMENTO  NOME_30,
    VALOR           VALOR,
    DATA            DATE,
    HORA            TIME,
    CANCELADO       BOLIANO,
    Z               VARCHAR(2),
    BRUTO           VALOR,
    REGISTRO        INTEGER,
    CANC            BOLIANO,
    TEF             BOLIANO,
    CHEQUE          BOLIANO,
    TRANSACAO       VARCHAR(10),
    CONFERIDO       BOLIANO
);

CREATE TABLE PAGAMENTO_2 (
    COD_PRY         DOUBLE PRECISION,
    COD             DOUBLE PRECISION,
    TIPO_PAGAMENTO  NOME_30,
    VALOR           VALOR,
    DATA            DATE,
    HORA            TIME,
    CANCELADO       BOLIANO,
    Z               VARCHAR(2),
    BRUTO           VALOR,
    REGISTRO        INTEGER,
    LIDO            BOLIANO,
    CLIENTE         NOME_100,
    COD_CLIENTE     VARCHAR(10),
    VENDEDOR        NOME_30,
    ECF             BOLIANO,
    ECFMOD          VARCHAR(2),
    NFCE            BOLIANO
);

CREATE TABLE PAPEL (
    PROTECAO  BOLIANO,
    IMAGEM    BOLIANO,
    MINUTOS   SMALLINT
);

CREATE TABLE PRODUDOS_LINKADO (
    COD_PRY          INTEGER NOT NULL,
    COD              VARCHAR(13) NOT NULL,
    CODIGO           VARCHAR(13),
    PRODUTO          VARCHAR(40),
    QUANT            VALOR,
    ATACADO          VALOR,
    PRECO            VALOR,
    CUSTO            VALOR,
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    FISCAL           VARCHAR(20),
    CUSTOINICIAL     VALOR,
    POCENTO          BOLIANO,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    ADICIONAL        NOME_30,
    ADDINICIO        BOLIANO
);

CREATE TABLE PRODUDOS_LINKADO2 (
    COD_PRY          INTEGER NOT NULL,
    COD              VARCHAR(13) NOT NULL,
    CODIGO           VARCHAR(13),
    PRODUTO          VARCHAR(40),
    QUANT            VALOR,
    ATACADO          VALOR,
    PRECO            VALOR,
    CUSTO            VALOR,
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    FISCAL           VARCHAR(20),
    CUSTOINICIAL     VALOR,
    POCENTO          BOLIANO,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    ADICIONAL        NOME_30,
    ADDINICIO        BOLIANO
);

CREATE TABLE PRODUTOS (
    COD              VARCHAR(13) NOT NULL,
    NOME             VARCHAR(50) NOT NULL,
    DESCRICAO        VARCHAR(100),
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    PRECO            VALOR,
    PRECOANTERIOR    VALOR,
    ESTOQUE          VALOR,
    TIPOVENDA        SMALLINT,
    FISCAL           VARCHAR(20),
    DATA             DATE,
    PRECOATACADO     VALOR,
    IMPORTADO        SMALLINT,
    ATIVO            SMALLINT,
    PROMOCAO         BOLIANO,
    LISTA            SMALLINT,
    ATACADOMININO    VALOR,
    CUSTO            VALOR,
    LINKADO          BOLIANO,
    CUSTOINICIAL     VALOR,
    PRECO2           VALOR,
    PRECO3           VALOR,
    PRECO4           VALOR,
    PRECO5           VALOR,
    INFOR2           NOME_30,
    INFOR3           NOME_30,
    INFOR4           NOME_30,
    INFOR5           NOME_30,
    TABELA           BOLIANO,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    FOTO             VARCHAR(100),
    ID_FORNECEDOR    INTEGER,
    INATIVO2         BOLIANO,
    INATIVO3         BOLIANO,
    SERVICO          BOLIANO,
    SERVICOALTERAR   BOLIANO,
    ALIQNAC          VALOR,
    ALIQIMP          VALOR,
    UTRIB            VARCHAR(2),
    QTRIB            NUMERIC(15,4),
    UNID             VARCHAR(2),
    CFOP             VARCHAR(4),
    CST_ICMS         VARCHAR(3),
    CST_PIS          VARCHAR(2),
    ICMS_ALIQ        VALOR,
    PERMISSAO_VENDA  BOLIANO,
    ESTADUAL         VALOR
);

CREATE TABLE PRODUTOS2 (
    COD              VARCHAR(13) NOT NULL,
    NOME             VARCHAR(50) NOT NULL,
    DESCRICAO        VARCHAR(100),
    FAMILIA          VARCHAR(50),
    GRUPOFAMILA      VARCHAR(50),
    MARCA            VARCHAR(50),
    FORNECEDOR       NOME_100,
    PRECO            VALOR,
    PRECOANTERIOR    VALOR,
    ESTOQUE          VALOR,
    TIPOVENDA        SMALLINT,
    FISCAL           VARCHAR(20),
    DATA             DATE,
    PRECOATACADO     VALOR,
    IMPORTADO        SMALLINT,
    ATIVO            SMALLINT,
    PROMOCAO         BOLIANO,
    LISTA            SMALLINT,
    ATACADOMININO    VALOR,
    CUSTO            VALOR,
    LINKADO          BOLIANO,
    CUSTOINICIAL     VALOR,
    PRECO2           VALOR,
    PRECO3           VALOR,
    PRECO4           VALOR,
    PRECO5           VALOR,
    INFOR2           NOME_30,
    INFOR3           NOME_30,
    INFOR4           NOME_30,
    INFOR5           NOME_30,
    TABELA           BOLIANO,
    TRIBUTADO        NOME_30,
    CODIGOTRIBUTADO  NOME_30,
    FOTO             VARCHAR(100),
    ID_FORNECEDOR    INTEGER,
    INATIVO2         BOLIANO,
    INATIVO3         BOLIANO,
    SERVICO          BOLIANO,
    SERVICOALTERAR   BOLIANO,
    ALIQNAC          VALOR,
    ALIQIMP          VALOR,
    UTRIB            VARCHAR(2),
    QTRIB            NUMERIC(15,4),
    UNID             VARCHAR(2),
    CFOP             VARCHAR(4),
    CST_ICMS         VARCHAR(3),
    CST_PIS          VARCHAR(2),
    ICMS_ALIQ        VALOR,
    PERMISSAO_VENDA  BOLIANO,
    ESTADUAL         VALOR
);

CREATE TABLE REDUCAO_Z (
    ID                  INTEGER NOT NULL,
    CAIXA               VARCHAR(20),
    NUMEROCAIXA         INTEGER,
    NUMEROSERIE         VARCHAR(20),
    MODELO              VARCHAR(20),
    DATA                DATE,
    CONTADORREINICIOOP  VARCHAR(3),
    CONTADORREDUCAOZ    VARCHAR(6),
    COO                 VARCHAR(6),
    TOTALGERAL          VALOR,
    VENDABRUTA          VALOR,
    CODIGOTATALIZADOR   VARCHAR(7),
    TOTAL               VALOR,
    CST_ICMS            VARCHAR(3),
    CFOP                VARCHAR(4),
    ALIQ_ICMS           VALOR,
    VALOR_OPR           VALOR,
    VALOR_BC_ICMS       VALOR,
    VALOR_ICMS          VALOR,
    DESCONTO            VALOR,
    ASCRECIMO           VALOR,
    BRUTODESCONTO       VALOR,
    VL_SISTEMA          VALOR,
    VL_DIFERENCA        VALOR,
    BAIXADO             BOLIANO
);

CREATE TABLE RESET (
    RESET       VARCHAR(50),
    RESETQUANT  INTEGER
);

CREATE TABLE TEF (
    COD            INTEGER NOT NULL,
    MUNEROCUPOM    NOME_30,
    TOTALCARTAO    VALOR,
    TOTALCHEQUE    VALOR,
    QUANT          INTEGER,
    PEDIDO         NOME_30,
    CUPOMATUAL     NOME_30,
    CNC            NOME_30,
    PEDIDO_D       NOME_30,
    MUNEROCUPOM_D  NOME_30
);

CREATE TABLE TIPO_PAG (
    COD         INTEGER NOT NULL,
    NOME        NOME_30,
    TROCO       BOLIANO,
    TROCOMAX    VALOR,
    PRAZO       SMALLINT,
    ACRE_DESC   VALOR,
    MINIMO      VALOR,
    ELGIN       VARCHAR(10),
    SWEDA       VARCHAR(10),
    VER         BOLIANO,
    DARUMA      VARCHAR(10),
    SCHALTER    VARCHAR(10),
    BEMATECH    VARCHAR(10),
    OUTRAMARCA  VARCHAR(10),
    TEF         BOLIANO,
    CHEQUE      BOLIANO,
    CONF2       BOLIANO,
    NAOGAVETA   BOLIANO,
    CADCHE      BOLIANO
);

CREATE TABLE TRANSACAO (
    COD         INTEGER NOT NULL,
    VALORSEM    NOME_30,
    VALOR       VALOR,
    TIPOPAG     NOME_30,
    APROVADO    NOME_100,
    CONFIRMADO  BOLIANO,
    CANCELADO   BOLIANO
);

CREATE TABLE USU (
    COD            INTEGER NOT NULL,
    NOME           NOME_30 NOT NULL,
    SUP            VARCHAR(5),
    SENHA          VARCHAR(150),
    SENHA2         VARCHAR(150),
    CAIXA          BOLIANO,
    CRIP           BOLIANO,
    LEMBRETESENHA  NOME_30
);

CREATE TABLE USU_PDV (
    COD                 INTEGER,
    COD_USU             INTEGER NOT NULL,
    CHEQUE              BOLIANO,
    SALDO               BOLIANO,
    SAIR                BOLIANO,
    CANC_GENERICO       BOLIANO,
    CANC_ULTIMO         BOLIANO,
    CANC_CUPOMATUAL     BOLIANO,
    CANC_CUPOMULTIMO    BOLIANO,
    GAVETA              BOLIANO,
    GENERICO            BOLIANO,
    BLOQUEIACAIXA       BOLIANO,
    SUPRIMENTO          BOLIANO,
    SANGRIA             BOLIANO,
    BALANCA             BOLIANO,
    LEITURAX            BOLIANO,
    REDUCAOZ            BOLIANO,
    USUARIO             BOLIANO,
    ENTRAR              BOLIANO,
    LEITURAX_DATA       BOLIANO,
    HORA                BOLIANO,
    TROCO               BOLIANO,
    QUANT               BOLIANO,
    DESBROQUEIA         BOLIANO,
    VALE                BOLIANO,
    VALE_TROCO          BOLIANO,
    CLIENTES            BOLIANO,
    CONSULTA_CLIENTES   BOLIANO,
    LIBERA_MINIMO       BOLIANO,
    CONFIGURACAO        BOLIANO,
    ATACADO             BOLIANO,
    ATACADOMININO       BOLIANO,
    EXTRA               BOLIANO,
    MAXDESCONTO         BOLIANO,
    MAXACRECIMO         BOLIANO,
    LIMPADADOS          BOLIANO,
    TROCA               BOLIANO,
    MSM                 BOLIANO,
    VENDEDOR            BOLIANO,
    CHEQUES             BOLIANO,
    DADOS1              BOLIANO,
    DADOS2              BOLIANO,
    DADOS3              BOLIANO,
    RETIRADAFORNECEDOR  BOLIANO,
    LIBERAQUANTIDADE    BOLIANO,
    CONSULTARPORNOME    BOLIANO_TRUE,
    NAOBARRA            BOLIANO,
    NAONOME             BOLIANO,
    CALC                BOLIANO,
    PAGAMENTO           BOLIANO_TRUE,
    TEF                 BOLIANO,
    CONSULTA10MAIS      BOLIANO,
    MAXDESCONTO_PORC    VALOR,
    VENDE_SEM_ESTOQUE   BOLIANO,
    OUTRAS_CONF1        BOLIANO,
    OUTRAS_CONF2        BOLIANO,
    OUTRAS_CONF3        BOLIANO,
    OUTRAS_CONF4        BOLIANO,
    OUTRAS_CONF5        BOLIANO,
    PERMISSAO_VENDA     BOLIANO,
    ESCOLHERCUPOM64     BOLIANO,
    REIMPRIMIRCUPOM     BOLIANO
);

CREATE TABLE VALE_QUANT (
    COD        INTEGER,
    NOME_PROD  NOME_30,
    COD_PROD   VARCHAR(13),
    QUANT      INTEGER,
    IMP        BOLIANO,
    VALOR      VALOR
);

CREATE TABLE VALE_TIPO (
    COD          INTEGER NOT NULL,
    PRODUTO      NOME_30,
    COD_PRODUTO  VARCHAR(13),
    VALOR        VALOR
);

CREATE TABLE VALE_TODOS (
    COD           INTEGER NOT NULL,
    NOME_PROD     NOME_30,
    COD_PROD      VARCHAR(13),
    VALOR         VALOR,
    DATA          DATE,
    HORA          TIME,
    CPF           VARCHAR(20),
    DATA_BUSCA    DATE,
    OPERADOR      NOME_30,
    RESPONSAVEL   NOME_30,
    NOME_CLIENTE  NOME_30,
    POCENTO       VALOR,
    VALORINICIAL  VALOR,
    DESCONTO      VALOR,
    CUPOM         BOLIANO,
    Z             VARCHAR(2)
);

CREATE TABLE VENDA (
    QUANT          VALOR,
    MENU           BLOB SUB_TYPE 1 SEGMENT SIZE 300,
    RECEBIDO       VALOR,
    VALOR          VALOR,
    FALTA          VALOR,
    VALOR2         VALOR,
    DESCONTO       VALOR,
    DESCONTOTOTAL  VALOR,
    RECEBIDO2      VALOR
);

CREATE TABLE Z_PROMOCAO (
    GRUPO     NOME_30,
    FAMILIA   NOME_30,
    PRODUTO   VARCHAR(13),
    NOME      VARCHAR(40),
    DESCONTO  VALOR,
    ATIVO     BOLIANO
);



/******************************************************************************/
/****                          Unique Constraints                          ****/
/******************************************************************************/

ALTER TABLE PRODUTOS ADD CONSTRAINT UNQ1_PRODUTOS UNIQUE (NOME);
ALTER TABLE USU ADD CONSTRAINT UNQ1_USU UNIQUE (NOME);


/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE BALANCA ADD CONSTRAINT PK_BALANCA PRIMARY KEY (COD);
ALTER TABLE CAIXA ADD CONSTRAINT PK_CAIXA PRIMARY KEY (COD);
ALTER TABLE CARTAO ADD CONSTRAINT PK_CARTAO PRIMARY KEY (COD);
ALTER TABLE CONVENIO ADD CONSTRAINT PK_CONVENIO PRIMARY KEY (COD);
ALTER TABLE CUPOM ADD CONSTRAINT PK_CUPOM PRIMARY KEY (COD);
ALTER TABLE GEN ADD CONSTRAINT PK_GEN PRIMARY KEY (COD);
ALTER TABLE IMPRESSORA ADD CONSTRAINT PK_IMPRESSORA PRIMARY KEY (COD);
ALTER TABLE ITEM ADD CONSTRAINT PK_ITEM PRIMARY KEY (COD_PRY);
ALTER TABLE PAGAMENTO ADD CONSTRAINT PK_PAGAMENTO PRIMARY KEY (COD_PRY);
ALTER TABLE PRODUDOS_LINKADO ADD CONSTRAINT PK_PRODUDOS_LINKADO PRIMARY KEY (COD_PRY);
ALTER TABLE PRODUDOS_LINKADO2 ADD CONSTRAINT PK_PRODUDOS_LINKADO2 PRIMARY KEY (COD_PRY);
ALTER TABLE PRODUTOS ADD CONSTRAINT PK_PRODUTOS PRIMARY KEY (COD);
ALTER TABLE P_FISCAL ADD CONSTRAINT PK_P_FISCAL PRIMARY KEY (COD);
ALTER TABLE REDUCAO_Z ADD CONSTRAINT PK_REDUCAO_Z PRIMARY KEY (ID);
ALTER TABLE TEF ADD CONSTRAINT PK_TEF PRIMARY KEY (COD);
ALTER TABLE TIPO_PAG ADD CONSTRAINT PK_TIPO_PAG PRIMARY KEY (COD);
ALTER TABLE TRANSACAO ADD CONSTRAINT PK_TRANSACAO PRIMARY KEY (COD);
ALTER TABLE USU ADD CONSTRAINT PK_USU PRIMARY KEY (COD);
ALTER TABLE VALE_TIPO ADD CONSTRAINT PK_VALE_TIPO PRIMARY KEY (COD);
ALTER TABLE VALE_TODOS ADD CONSTRAINT PK_VALE_TODOS PRIMARY KEY (COD);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE ITEM ADD CONSTRAINT FK_ITEM_1 FOREIGN KEY (COD) REFERENCES CUPOM (COD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PAGAMENTO ADD CONSTRAINT FK_PAGAMENTO_1 FOREIGN KEY (COD) REFERENCES CUPOM (COD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE USU_PDV ADD CONSTRAINT FK_USU_PDV_1 FOREIGN KEY (COD_USU) REFERENCES USU (COD) ON DELETE CASCADE ON UPDATE CASCADE;


/******************************************************************************/
/****                               Indices                                ****/
/******************************************************************************/

CREATE DESCENDING INDEX CUPOM_ ON CUPOM (COD, COD_CUPOM, GNF, DATA, HORAINICIAL);
CREATE INDEX CUPOM_IDX1 ON CUPOM (CANCELADO, ATUAL);
CREATE INDEX CUPOM_IDX2 ON CUPOM (Z, NPEDIDO, NUMERONFCE);
CREATE INDEX CUPOM_IDX3 ON CUPOM (COD_CUPOM);
CREATE INDEX CUPOM_IDX4 ON CUPOM (DATA);
CREATE INDEX CUPOM_IDX5 ON CUPOM (TOTAL);
CREATE INDEX CUPOM_IDX6 ON CUPOM (NUMERONFCE);
CREATE DESCENDING INDEX CUPOM_IDX7 ON CUPOM (COD);
CREATE DESCENDING INDEX CUPOM_2_ ON CUPOM_2 (COD, COD_CUPOM, GNF, DATA, HORAINICIAL);
CREATE INDEX CUPOM_2_IDX1 ON CUPOM_2 (COD);
CREATE INDEX CUPOM_2_IDX2 ON CUPOM_2 (COD_CUPOM);
CREATE INDEX CUPOM_2_IDX3 ON CUPOM_2 (DATA);
CREATE DESCENDING INDEX ITEM_ ON ITEM (COD_PRY, COD, DATA, HORA);
CREATE INDEX ITEM_IDX1 ON ITEM (CANCELADO, GENERICO, ATUAL);
CREATE INDEX ITEM_IDX2 ON ITEM (COD_CANCELOR, Z);
CREATE INDEX ITEM_IDX3 ON ITEM (COD_PRODUTO);
CREATE DESCENDING INDEX ITEM_2_ ON ITEM_2 (COD_PRY, COD, DATA, HORA);
CREATE DESCENDING INDEX PAGAMENTO_ ON PAGAMENTO (COD_PRY, COD, DATA, HORA);
CREATE DESCENDING INDEX PAGAMENTO_2_ ON PAGAMENTO_2 (COD_PRY, COD, DATA, HORA);
CREATE INDEX PRODUDOS_LINKADO_ ON PRODUDOS_LINKADO (COD_PRY, COD, CODIGO, PRODUTO);
CREATE INDEX PRODUDOS_LINKADO2_ ON PRODUDOS_LINKADO2 (COD_PRY, COD, CODIGO, PRODUTO);
CREATE INDEX PRODUTOS_ ON PRODUTOS (COD, NOME);
CREATE INDEX PRODUTOS2_ ON PRODUTOS2 (COD, NOME);


/******************************************************************************/
/****                               Triggers                               ****/
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/****                         Triggers for tables                          ****/
/******************************************************************************/



/* Trigger: REDUCAO_Z_BI */
CREATE TRIGGER REDUCAO_Z_BI FOR REDUCAO_Z
ACTIVE BEFORE INSERT POSITION 0
AS BEGIN   IF (NEW.ID IS NULL) THEN      NEW.ID = GEN_ID(GEN_REDUCAO_Z_ID,1);  END
^

SET TERM ; ^



/******************************************************************************/
/****                                Roles                                 ****/
/******************************************************************************/

CREATE ROLE RDB$ADMIN;
